<!DOCTYPE html>
<html>
<head>
  <title>Admin Panel</title>
  <style>
    body {
      background-image: url('metal-bg.gif');
      background-size: cover;
      font-family: Arial, sans-serif;
      color: white;
      padding: 20px;
    }
    .section {
      margin-bottom: 1.5em;
      background-color: rgba(0,0,0,0.6);
      padding: 15px;
      border-radius: 10px;
    }
    .media img, .media video {
      max-width: 200px;
      margin: 5px;
      border-radius: 10px;
    }
    button {
      margin-top: 5px;
      padding: 8px 16px;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <h2>Admin Login</h2>
  <input type="text" id="username" placeholder="Username">
  <input type="password" id="password" placeholder="Password">
  <button onclick="login()">Login</button>

  <div id="adminContent" style="display: none;">
    <div class="section">
      <h3>Cutting</h3>
      <textarea id="cuttingText" placeholder="Cutting description"></textarea><br>
      <input type="file" id="cuttingMedia" multiple accept="image/*,video/*"><br>
      <div id="cuttingPreview" class="media"></div>
      <button onclick="saveText('cutting')">Save Cutting Text</button>
      <button onclick="saveMedia('cutting')">Save Cutting Media</button>
    </div>

    <div class="section">
      <h3>Welding</h3>
      <textarea id="weldingText" placeholder="Welding description"></textarea><br>
      <input type="file" id="weldingMedia" multiple accept="image/*,video/*"><br>
      <div id="weldingPreview" class="media"></div>
      <button onclick="saveText('welding')">Save Welding Text</button>
      <button onclick="saveMedia('welding')">Save Welding Media</button>
    </div>
  </div>

  <script>
    function login() {
      const u = document.getElementById('username').value;
      const p = document.getElementById('password').value;
      if (u === 'admin' && p === 'admin') {
        document.getElementById('adminContent').style.display = 'block';
      } else {
        alert('Invalid credentials');
      }
    }

    function previewMedia(inputId, previewId) {
      const input = document.getElementById(inputId);
      const preview = document.getElementById(previewId);
      preview.innerHTML = '';
      Array.from(input.files).forEach(file => {
        const reader = new FileReader();
        reader.onload = e => {
          const media = file.type.startsWith('video')
            ? `<video controls src="${e.target.result}"></video>`
            : `<img src="${e.target.result}" />`;
          preview.innerHTML += media;
        };
        reader.readAsDataURL(file);
      });
    }

    function saveText(sectionId) {
      const textValue = document.getElementById(sectionId + 'Text').value;
      const existing = JSON.parse(localStorage.getItem(sectionId + 'Texts') || '[]');
      existing.push(textValue);
      localStorage.setItem(sectionId + 'Texts', JSON.stringify(existing));
      alert(sectionId + ' text saved!');
    }

    function saveMedia(sectionId) {
      const files = document.getElementById(sectionId + 'Media').files;
      const mediaData = JSON.parse(localStorage.getItem(sectionId + 'Media') || '[]');
      let filesLoaded = 0;
      Array.from(files).forEach(file => {
        const reader = new FileReader();
        reader.onload = e => {
          mediaData.push({ type: file.type, src: e.target.result });
          filesLoaded++;
          if (filesLoaded === files.length) {
            localStorage.setItem(sectionId + 'Media', JSON.stringify(mediaData));
            alert(sectionId + ' media saved!');
          }
        };
        reader.readAsDataURL(file);
      });
      if (files.length === 0) alert('No files selected.');
    }

    window.onload = () => {
      ['cutting', 'welding'].forEach(section => {
        const mediaContainer = document.getElementById(section + 'Preview');
        const media = JSON.parse(localStorage.getItem(section + 'Media') || '[]');
        media.forEach(item => {
          const el = item.type.startsWith('video')
            ? `<video controls src="${item.src}"></video>`
            : `<img src="${item.src}" />`;
          mediaContainer.innerHTML += el;
        });
      });
    };
  </script>
</body>
</html>
