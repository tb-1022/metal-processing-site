<!DOCTYPE html>
<html>
<head>
  <title>Admin Panel</title>
  <style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-image: url('background.jpg');
    background-size: cover;
    margin: 0;
    padding: 40px;
    color: #fff;
  }

  .container {
    background-color: rgba(0, 0, 0, 0.75);
    padding: 30px;
    border-radius: 12px;
    max-width: 1000px;
    margin: auto;
    box-shadow: 0 0 20px rgba(0, 0, 0, 0.7);
  }

  h2, h3 {
    text-align: center;
    border-bottom: 1px solid #555;
    padding-bottom: 8px;
  }

  textarea {
    width: 100%;
    height: 100px;
    padding: 10px;
    margin: 10px 0;
    border-radius: 8px;
    border: none;
    resize: vertical;
    font-size: 16px;
  }

  input[type="file"] {
    margin: 10px 0;
  }

  button {
    background-color: #3498db;
    color: white;
    padding: 10px 20px;
    margin: 10px 5px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-weight: bold;
    transition: background-color 0.3s ease;
  }

  button:hover {
    background-color: #2980b9;
  }

  .media {
    display: flex;
    flex-wrap: wrap;
    justify-content: flex-start;
    gap: 15px;
    margin-top: 10px;
  }

  .media img,
  .media video {
    max-width: 200px;
    border-radius: 8px;
    box-shadow: 0 0 5px rgba(255,255,255,0.3);
  }

  .section {
    margin-bottom: 30px;
  }
</style>

</head>
<body>
  <h2>Admin Login</h2>
  <input type="text" id="username" placeholder="Username">
  <input type="password" id="password" placeholder="Password">
  <button onclick="login()">Login</button>

  <div id="adminContent" style="display: none;">
    <div class="section">
      <h3>Cutting</h3>
      <textarea id="cuttingText" placeholder="Cutting description"></textarea><br>
      <input type="file" id="cuttingMedia" multiple accept="image/*,video/*"><br>
      <div id="cuttingPreview" class="media"></div>
      <button onclick="saveText('cutting')">Save Cutting Text</button>
      <button onclick="saveMedia('cutting')">Save Cutting Media</button>
    </div>

    <div class="section">
      <h3>Welding</h3>
      <textarea id="weldingText" placeholder="Welding description"></textarea><br>
      <input type="file" id="weldingMedia" multiple accept="image/*,video/*"><br>
      <div id="weldingPreview" class="media"></div>
      <button onclick="saveText('welding')">Save Welding Text</button>
      <button onclick="saveMedia('welding')">Save Welding Media</button>
    </div>
  </div>

  <script>
    function login() {
      const u = document.getElementById('username').value;
      const p = document.getElementById('password').value;
      if (u === 'admin' && p === 'admin') {
        document.getElementById('adminContent').style.display = 'block';
      } else {
        alert('Invalid credentials');
      }
    }

    function previewMedia(inputId, previewId) {
      const input = document.getElementById(inputId);
      const preview = document.getElementById(previewId);
      preview.innerHTML = '';
      Array.from(input.files).forEach(file => {
        const reader = new FileReader();
        reader.onload = e => {
          const media = file.type.startsWith('video')
            ? `<video controls src="${e.target.result}"></video>`
            : `<img src="${e.target.result}" />`;
          preview.innerHTML += media;
        };
        reader.readAsDataURL(file);
      });
    }

    function saveText(sectionId) {
      const textValue = document.getElementById(sectionId + 'Text').value;
      const existing = JSON.parse(localStorage.getItem(sectionId + 'Texts') || '[]');
      existing.push(textValue);
      localStorage.setItem(sectionId + 'Texts', JSON.stringify(existing));
      alert(sectionId + ' text saved!');
    }

 function saveMedia(sectionId) {
  const input = document.getElementById(sectionId + 'Media');
  const preview = document.getElementById(sectionId + 'Preview');
  const files = input.files;
  const mediaData = JSON.parse(localStorage.getItem(sectionId + 'Media') || '[]');
  
  let filesLoaded = 0;
  Array.from(files).forEach(file => {
    const reader = new FileReader();
    reader.onload = e => {
      mediaData.push({ type: file.type, src: e.target.result });
      filesLoaded++;
      if (filesLoaded === files.length) {
        localStorage.setItem(sectionId + 'Media', JSON.stringify(mediaData));
        alert(sectionId + ' media saved!');
        
        // âœ… Clear preview and reset file input
        preview.innerHTML = '';
        input.value = '';
      }
    };
    reader.readAsDataURL(file);
  });

  if (files.length === 0) alert('No files selected.');
}


    window.onload = () => {
      ['cutting', 'welding'].forEach(section => {
        const mediaContainer = document.getElementById(section + 'Preview');
        const media = JSON.parse(localStorage.getItem(section + 'Media') || '[]');
        media.forEach(item => {
          const el = item.type.startsWith('video')
            ? `<video controls src="${item.src}"></video>`
            : `<img src="${item.src}" />`;
          mediaContainer.innerHTML += el;
        });
      });
    };
  </script>
</body>
</html>
